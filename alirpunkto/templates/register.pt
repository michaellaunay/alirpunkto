<div metal:use-macro="load: layout.pt">
    <div metal:fill-slot="content">
        <tal:block define="status python:candidature.state.name" i18n:domain="alirpunkto">
            <div class="container" tal:condition="python: not hasattr(context,'url_obsolete') or not url_obsolete">
                <!-- DRAFT Status Section -->
                <div tal:condition="python: not status or status == 'DRAFT'">
                    <form method="POST">
                        <!-- Email Field -->
                        <div class="register_email">
                            <label i18n:translate="email_label" title="Enter your email address here." i18n:attributes="title email_title_label">Email</label>
                            <input class="email-input" type="email" name="email" title="Your email address will be used for account verification and communication." i18n:attributes="title email_title_input">
                        </div>

                        <!-- Type of Registration -->
                        <div class="register_choice">
                            <label i18n:translate="type_of_registration" title="Select the type of registration that suits you."  i18n:attributes="title type_registration_label">Please choice your type of registration</label>
                            <select name="choice" title="Different types of memberships offer different benefits." i18n:attributes="title type_registration_choice">
                                <option value="ORDINARY" i18n:translate="candidature_types_ordinary" title="Choose this if you want to be an ordinary member." i18n:attributes="title candidature_types_ordinary_value">Ordinary Member</option>
                                <option value="COOPERATOR" i18n:translate="candidature_types_cooperator" title="Choose this if you want to actively cooperate and contribute." i18n:attributes="title candidature_types_cooperator_value">Cooperator</option>
                            </select>
                        </div>
                        <!-- Submit Button -->
                        <input type="submit" value="Submit" name="submit" title="Click to submit your registration." i18n:attributes="title submit_registration_title; value submit_button">
                    </form>
                </div>

                <!-- EMAIL_VALIDATION Status Section -->
                <div tal:condition="python:status == 'EMAIL_VALIDATION'">
                    <form method="POST">
                        <!-- Instructions -->
                        <p i18n:translate="challenge_instruction_text">Please enter the results of the challenges you received in your email to verify your address.</p>

                        <!-- Challenge A Field -->
                        <div class="challenge-item">
                            <label i18n:translate="enter_result_label_A" title="Enter the result of the operation for Challenge A." i18n:attributes="title result_label_title_A">Enter result for Challenge A:</label>
                            <input type="text" name="result_A" title="Please enter the result of Challenge A." i18n:attributes="title result_input_title_A">
                        </div>

                        <!-- Challenge B Field -->
                        <div class="challenge-item">
                            <label i18n:translate="enter_result_label_B" title="Enter the result of the operation for Challenge B." i18n:attributes="title result_label_title_B">Enter result for Challenge B:</label>
                            <input type="text" name="result_B" title="Please enter the result of Challenge B." i18n:attributes="title result_input_title_B">
                        </div>

                        <!-- Challenge C Field -->
                        <div class="challenge-item">
                            <label i18n:translate="enter_result_label_C" title="Enter the result of the operation for Challenge C." i18n:attributes="title result_label_title_C">Enter result for Challenge C:</label>
                            <input type="text" name="result_C" title="Please enter the result of Challenge C." i18n:attributes="title result_input_title_C">
                        </div>

                        <!-- Challenge D Field -->
                        <div class="challenge-item">
                            <label i18n:translate="enter_result_label_D" title="Enter the result of the operation for Challenge D." i18n:attributes="title result_label_title_D">Enter result for Challenge D:</label>
                            <input type="text" name="result_D" title="Please enter the result of Challenge D." i18n:attributes="title result_input_title_D">
                        </div>
                        
                        <!-- Verify Button -->
                        <input type="submit" value="Submit"  name="submit" title="Click to verify the entered codes." i18n:attributes="title submit_email_validation_title; value verify_button">
                    </form>
                </div>

            <!-- CONFIRMED_HUMAN Status Section -->
            <div tal:condition="python:status == 'CONFIRMED_HUMAN'">
                <form method="POST" tal:condition="python:candidature.type==CandidatureTypes.ORDINARY">
                    <div>
                        <label i18n:translate="pseudonym_label" title="Enter your pseudonym here." i18n:attributes="title pseudonym_title_label">Pseudonym</label>
                        <input type="text" name="pseudonym" title="Enter your pseudonym here." i18n:attributes="title pseudonym_title_label">
                    </div>
                    <div>
                        <label i18n:translate="password_label" title="Enter your password here." i18n:attributes="title password_title_label">Password</label>
                        <input type="password" name="password" title="Enter your password here." i18n:attributes="title password_title_label">
                    </div>
                    <div>
                        <label i18n:translate="password_confirm_label" title="Confirm your password here." i18n:attributes="title password_confirm_title_label">Confirm Password</label>
                        <input type="password" name="password_confirm" title="Confirm your password here." i18n:attributes="title password_confirm_title">
                    </div>
                    <input type="submit" value="Submit"  name="submit" title="Click to validate ." i18n:attributes="title submit_password_and_pseudonym; value verify_button">
                </form>
                <div tal:condition="python:candidature.type==CandidatureTypes.COOPERATOR" tal:omit-tag="">                    
                    <span tal:replace="structure form">Form Content</span>
                </div>
            </div>

            <!-- UNIQUE_DATA Status Section -->
            <div class="container" tal:condition="python:status == 'UNIQUE_DATA'">
                <form method="POST">
                    <label>Identity Verification:</label>
                    <select name="identity_verification">
                        <option value="email">Send copy by email</option>
                        <option value="video">Video Conference</option>
                    </select>
                    <input type="submit" value="Proceed">
                </form>
            </div>

            <!-- PENDING Status Section -->
            <div tal:condition="python:status == 'PENDING'">
                <p i18n:translate="pending_description">Your application is being reviewed. You will be notified by email once it has been approved.</p>
            </div>

            <!-- APPROVED Status Section -->
            <div tal:condition="python:status == 'APPROVED'">
                <h3 i18n:translate="approved_heading">Congratulations on Your Approval!</h3>
                <p i18n:translate="approved_description">Your application has been approved. You can now log in using the pseudonym and password you provided during the application process.</p>
                <a href="login" class="login-button" i18n:attributes="href login_page_url; inner-text login_button_label">Login</a>
            </div>

        </div>

        <div tal:condition="exists:error" tal:omit-tag="">
            <div class="error" tal:condition="exists:error">
                <p tal:content="error">Error message here</p>
            </div>
            <div class="error" tal:condition="exists:error_details">
                <p tal:content="error_details">Error details message here</p>
            </div>
        </div>
        </tal:block>
    </div>
</div>
